(()=>{document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("section[id]"),t=document.querySelectorAll("#navMenu a");function a(){let n="";e.forEach(o=>{let m=o.offsetTop-150;window.scrollY>=m&&(n=o.getAttribute("id"))}),t.forEach(o=>{o.getAttribute("href").replace("/#","")===n?o.setAttribute("aria-current","page"):o.removeAttribute("aria-current")})}window.addEventListener("scroll",a),a()});var x={Dakherstellingen:"dakherstellingen.json","Dakreiniging & Ontmossen":"dakreiniging.json","Onderhoud Platte Daken":"onderhoud-platte-daken.json"},s=document.getElementById("serviceModal"),p=document.getElementById("modalTitle"),f=document.getElementById("modalDescription"),h=document.getElementById("modalServicesList"),g=document.getElementById("modalExtraInfoList"),w=[document.getElementById("closeModal"),document.getElementById("closeModalBottom")],v=null;function E(e){let t=x[e],a=`assets/data/${t}`;v=document.activeElement,fetch(a).then(n=>{if(!n.ok)throw new Error(`Failed to load ${t}`);return n.json()}).then(n=>{p.textContent=n.title||e,f.textContent=n.body||"",h.innerHTML=(n.services||[]).map(o=>`<li>${o}</li>`).join(""),g.innerHTML=(n.extra_info||[]).map(o=>`<li>${o}</li>`).join(""),s.setAttribute("aria-hidden","false"),s.classList.remove("opacity-0","translate-y-0","pointer-events-none"),s.classList.add("opacity-100","translate-y-0"),document.body.style.overflow="hidden",setTimeout(()=>document.getElementById("closeModal").focus(),100)}).catch(n=>{p.textContent="",f.textContent="",h.innerHTML="",g.innerHTML="",s.querySelector("h3").classList.add("hidden");let o=`Er is een probleem opgetreden: ${n.message||"Onbekende fout"}`;f.innerHTML=`<p class="text-red-600 text-lg font-semibold">${o}</p>`,g.innerHTML='<li class="text-red-600 text-sm">Probeer het later opnieuw of neem contact op met de beheerder.</li>',s.setAttribute("aria-hidden","false"),s.classList.remove("opacity-0","translate-y-4","pointer-events-none"),s.classList.add("opacity-100","translate-y-0"),document.body.style.overflow="hidden",setTimeout(()=>document.getElementById("closeModal").focus(),100)})}function L(){s.classList.add("opacity-0","translate-y-4","pointer-events-none"),s.classList.remove("opacity-100","translate-y-0"),s.setAttribute("aria-hidden","true"),document.body.style.overflow="auto",v&&v.focus()}document.querySelectorAll(".card").forEach(e=>{let t=e.querySelector("h3").textContent.trim();e.setAttribute("tabindex","0"),e.setAttribute("role","button"),e.setAttribute("aria-label",`Meer informatie over ${t}`),e.addEventListener("click",()=>E(t)),e.addEventListener("keydown",a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),E(t))})});w.forEach(e=>e.addEventListener("click",L));s.addEventListener("click",e=>{s.querySelector("div.bg-white").contains(e.target)||L()});document.addEventListener("keydown",e=>{e.key==="Escape"&&s.classList.contains("opacity-100")&&L()});var u=document.getElementById("navToggle"),r=document.getElementById("navMenu");u.addEventListener("click",()=>{let e=u.getAttribute("aria-expanded")==="true";u.setAttribute("aria-expanded",String(!e)),e?(r.classList.remove("opacity-100","scale-100"),r.classList.add("opacity-0","scale-95"),setTimeout(()=>{r.classList.add("hidden")},300)):(r.classList.remove("hidden"),requestAnimationFrame(()=>{r.classList.remove("opacity-0","scale-95"),r.classList.add("opacity-100","scale-100")}))});document.querySelectorAll("#navMenu a").forEach(e=>{e.addEventListener("click",()=>{window.innerWidth<768&&(u.setAttribute("aria-expanded","false"),r.classList.remove("opacity-100","scale-100"),r.classList.add("opacity-0","scale-95"),setTimeout(()=>{r.classList.add("hidden")},300))})});var i=document.getElementById("toast"),k=document.getElementById("toast-message");function d(e,t="success"){k.textContent=e,i.classList.remove("bg-green-500","bg-red-500"),i.classList.add(t==="success"?"bg-green-500":"bg-red-500"),i.classList.add(t==="success"?"text-black":"text-white"),i.classList.remove("hidden"),requestAnimationFrame(()=>{i.classList.remove("translate-x-full","opacity-0"),i.classList.add("translate-x-0","opacity-100")}),setTimeout(()=>{i.classList.remove("translate-x-0","opacity-100"),i.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{i.classList.add("hidden")},500)},4e3)}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("contactForm");e.addEventListener("submit",function(t){t.preventDefault();let a=document.getElementById("naam"),n=document.getElementById("email"),o=document.getElementById("dienst"),m=document.getElementById("onderwerp"),l=!0;if(a.value.trim()===""?(document.getElementById("error-naam").classList.remove("hidden"),l=!1):document.getElementById("error-naam").classList.add("hidden"),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.trim())?document.getElementById("error-email").classList.add("hidden"):(document.getElementById("error-email").classList.remove("hidden"),l=!1),o.value?document.getElementById("error-dienst").classList.add("hidden"):(document.getElementById("error-dienst").classList.remove("hidden"),l=!1),m.value.trim().length<5?(document.getElementById("error-onderwerp").classList.remove("hidden"),l=!1):document.getElementById("error-onderwerp").classList.add("hidden"),!l){d("Controleer de invoervelden aub.","error");return}let b=new FormData(e);console.log(e.action),fetch(e.action,{method:"POST",body:b,headers:{Accept:"application/json"}}).then(c=>c.json()).then(c=>{if(c.success)e.reset(),d("Bedankt! Je aanvraag is verzonden.","success");else if(c.errors){for(let[B,I]of Object.entries(c.errors)){let y=document.getElementById("error-"+B);y&&(y.textContent=I,y.classList.remove("hidden"))}d("Er zijn enkele fouten. Controleer je invoer.","error")}else d("Onbekende fout. Probeer opnieuw.","error")}).catch(()=>{d("Verbindingsfout. Probeer het later opnieuw.","error")})})});})();
